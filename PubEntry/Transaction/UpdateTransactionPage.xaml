<Page x:Class="PubEntry.Transaction.UpdateTransactionPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="clr-namespace:PubEntry.Transaction.Advance"
      Loaded="Page_Loaded" Title="Update Transaction">

	<Page.Resources>
		<!-- Improved styling for better visual appeal -->
		<Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="Margin" Value="0,10,0,5"/>
		</Style>

		<Style x:Key="LabelStyle" TargetType="Label">
			<Setter Property="VerticalAlignment" Value="Center"/>
			<Setter Property="Margin" Value="5"/>
		</Style>

		<Style x:Key="GroupBoxStyle" TargetType="GroupBox">
			<Setter Property="Margin" Value="10"/>
			<Setter Property="Padding" Value="10"/>
			<Setter Property="BorderThickness" Value="1"/>
		</Style>
	</Page.Resources>

	<Grid Margin="5">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!-- Header Section -->
		<StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
			<TextBlock x:Name="dateTimeTextBlock" 
					Grid.Row="0" 
					Text="Date Time" 
					FontSize="16" 
					FontWeight="Bold" 
					HorizontalAlignment="Center" 
					Margin="0,0,10,15"/>

			<ComboBox x:Name="locationComboBox" Margin="10,0,0,15" Padding="5" SelectionChanged="locationComboBox_SelectionChanged" />
		</StackPanel>

		<!-- Main Content Area -->
		<Grid Grid.Row="1">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*"/>
				<ColumnDefinition Width="*"/>
			</Grid.ColumnDefinitions>

			<!-- Left Column -->
			<StackPanel Grid.Column="0" Margin="0,0,10,0">

				<!-- Customer Information -->
				<GroupBox Header="Guest Information" Style="{StaticResource GroupBoxStyle}">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="Auto"/>
						</Grid.RowDefinitions>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition Width="*"/>
						</Grid.ColumnDefinitions>

						<Label Grid.Row="0" Grid.Column="0" Content="Mobile:" Style="{StaticResource LabelStyle}"/>
						<TextBox x:Name="numberTextBox" 
                         Grid.Row="0" Grid.Column="1" 
                         Margin="5"
						 Padding="8,6"
                         PreviewTextInput="textBox_PreviewTextInput" 
                         MaxLength="10" 
                         TextChanged="numberTextBox_TextChanged"
                         TabIndex="1"/>

						<Label Grid.Row="1" Grid.Column="0" Content="Name:" Style="{StaticResource LabelStyle}"/>
						<TextBox x:Name="nameTextBox" 
                         Grid.Row="1" Grid.Column="1" 
						 Margin="5"
						 Padding="8,6"
                         MaxLength="250" 
                         TextWrapping="Wrap"
                         TabIndex="2"/>

						<CheckBox x:Name="loyaltyCheckBox" 
                          Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2"
						  HorizontalAlignment="Center"
                          Content="Loyalty Guest" 
                          Margin="5,10,5,5"
                          FontSize="12"
                          TabIndex="3"/>
					</Grid>
				</GroupBox>

				<!-- Guest Count -->
				<GroupBox Header="Guest Count" Style="{StaticResource GroupBoxStyle}">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="Auto"/>
						</Grid.RowDefinitions>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition Width="*"/>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition Width="*"/>
						</Grid.ColumnDefinitions>

						<Label Grid.Row="0" Grid.Column="0" Content="Male:" Style="{StaticResource LabelStyle}"/>
						<TextBox x:Name="maleTextBox" 
                         Grid.Row="0" Grid.Column="1" 
                         Margin="5" Padding="8,6"
                         PreviewTextInput="textBox_PreviewTextInput" 
                         MaxLength="2" 
                         Text="0" 
                         TextAlignment="Right"
                         TabIndex="4"/>

						<Label Grid.Row="0" Grid.Column="2" Content="Female:" Style="{StaticResource LabelStyle}"/>
						<TextBox x:Name="femaleTextBox" 
                         Grid.Row="0" Grid.Column="3" 
                         Margin="5" Padding="8,6"
                         PreviewTextInput="textBox_PreviewTextInput" 
                         MaxLength="2" 
                         Text="0" 
                         TextAlignment="Right"
                         TabIndex="5"/>
					</Grid>
				</GroupBox>

				<!-- Reservation Details -->
				<GroupBox Header="Reservation Details" Style="{StaticResource GroupBoxStyle}">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="Auto"/>
						</Grid.RowDefinitions>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition Width="*"/>
						</Grid.ColumnDefinitions>

						<Label Grid.Row="0" Grid.Column="0" Content="Reservation:" Style="{StaticResource LabelStyle}"/>
						<ComboBox x:Name="reservationComboBox" 
                          Grid.Row="0" Grid.Column="1" 
                          Margin="5" 
                          Padding="8,6"
                          BorderBrush="#BDC3C7"
                          TabIndex="6"/>

						<Label Grid.Row="1" Grid.Column="0" Content="Remarks:" Style="{StaticResource LabelStyle}"/>
						<TextBox x:Name="remarksTextBox" 
                         Grid.Row="1" Grid.Column="1" 
                         Margin="5" Padding="8,6"
                         TextWrapping="Wrap" 
                         Height="60"
                         AcceptsReturn="True"
                         TabIndex="7"/>
					</Grid>
				</GroupBox>
			</StackPanel>

			<!-- Right Column - Advance Section (conditionally visible) -->
			<StackPanel Grid.Column="1" Margin="0,0,10,0">
				<GroupBox x:Name="advancePanel" Header="Advance Details" Style="{StaticResource GroupBoxStyle}" Visibility="Hidden">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="Auto"/>
						</Grid.RowDefinitions>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition Width="*"/>
						</Grid.ColumnDefinitions>

						<Label Grid.Row="0" Grid.Column="0" Content="Booking:" Style="{StaticResource LabelStyle}"/>
						<TextBox x:Name="bookingTextBox" 
					Grid.Row="0" Grid.Column="1" 
					Margin="5" Padding="8,6"
					Text="0" 
					IsReadOnly="True" 
					TextAlignment="Right"/>

						<Label Grid.Row="1" Grid.Column="0" Content="Advance:" Style="{StaticResource LabelStyle}"/>
						<TextBox x:Name="advanceTextBox" 
					Grid.Row="1" Grid.Column="1" 
					Margin="5" Padding="8,6"
					Text="0" 
					IsReadOnly="True" 
					TextAlignment="Right"/>
					</Grid>
				</GroupBox>

				<!-- Payment Methods -->
				<GroupBox Grid.Column="1" Header="Payment Methods" Style="{StaticResource GroupBoxStyle}">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="Auto"/>
						</Grid.RowDefinitions>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition Width="*"/>
						</Grid.ColumnDefinitions>

						<Label Grid.Row="0" Grid.Column="0" Content="Cash:" Style="{StaticResource LabelStyle}"/>
						<TextBox x:Name="cashTextBox" 
                     Grid.Row="0" Grid.Column="1" 
                     Margin="5" Padding="8,6"
                     PreviewTextInput="textBox_PreviewTextInput" 
                     MaxLength="10" 
                     Text="0" 
                     TextAlignment="Right"
                     TabIndex="8"/>

						<Label Grid.Row="1" Grid.Column="0" Content="Card:" Style="{StaticResource LabelStyle}"/>
						<TextBox x:Name="cardTextBox" 
                     Grid.Row="1" Grid.Column="1" 
                     Margin="5" Padding="8,6"
                     PreviewTextInput="textBox_PreviewTextInput" 
                     MaxLength="10" 
                     Text="0" 
                     TextAlignment="Right"
                     TabIndex="9"/>

						<Label Grid.Row="2" Grid.Column="0" Content="UPI:" Style="{StaticResource LabelStyle}"/>
						<TextBox x:Name="upiTextBox" 
                     Grid.Row="2" Grid.Column="1" 
                     Margin="5" Padding="8,6"
                     PreviewTextInput="textBox_PreviewTextInput" 
                     MaxLength="10" 
                     Text="0" 
                     TextAlignment="Right"
                     TabIndex="10"/>

						<Label Grid.Row="3" Grid.Column="0" Content="Amex:" Style="{StaticResource LabelStyle}"/>
						<TextBox x:Name="amexTextBox" 
                     Grid.Row="3" Grid.Column="1" 
                     Margin="5" Padding="8,6"
                     PreviewTextInput="textBox_PreviewTextInput" 
                     MaxLength="10" 
                     Text="0" 
                     TextAlignment="Right"
                     TabIndex="11"/>

						<Label Grid.Row="4" Grid.Column="0" Content="Online QR:" Style="{StaticResource LabelStyle}"/>
						<TextBox x:Name="onlineQRTextBox" 
                     Grid.Row="4" Grid.Column="1" 
                     Margin="5" Padding="8,6"
                     PreviewTextInput="textBox_PreviewTextInput" 
                     MaxLength="10" 
                     Text="0" 
                     TextAlignment="Right"
                     TabIndex="12"/>
					</Grid>
				</GroupBox>
			</StackPanel>
		</Grid>

		<!-- Action Button -->
		<Button x:Name="saveButton" 
        Grid.Row="2"
        Content="Save" 
        Margin="0,15,0,10" 
        Padding="15,10" 
        MinWidth="200" 
        MinHeight="45" 
        Click="saveButton_Click" 
        HorizontalAlignment="Center" 
        IsDefault="True" 
        Style="{DynamicResource AccentButtonStyle}"
        FontSize="14"
        FontWeight="SemiBold"
        TabIndex="13"/>
	</Grid>
</Page>