@page "/admin/updateTransaction"

<PageTitle>Update Transaction</PageTitle>

<div class="page">
	<div class="sidebar">
		<NavMenu />
	</div>

	<main>
		<article class="content px-4">
			<div class="container">
				<div class="form-group">
					<label>Transaction Id</label>
					<input class="input-group-text" type="text" @bind="TransactionModel.Id" placeholder="Transaction Id" />
				</div>

				<button class="btn btn-primary" type="button" @onclick="OnLoadTransactionButtonClicked">Load Transaction</button>

				@if (TransactionModel.Id != 0)
				{
					<select class="form-select-sm" @onchange="OnLocationSelect">
						@foreach (var location in locations)
						{
							<option value="@location.Id">@location.Name</option>
						}
					</select>

					<div class="form-group">
						<label>Number</label>
						<input class="input-group-text" type="text" @bind="PersonModel.Number" @bind:after="OnPersonNumberChanged" placeholder="Number" />
					</div>

					<div class="form-group">
						<label>Name</label>
						@if (PersonModel.Id == 0)
						{
							<input class="input-group-text" type="text" @bind="PersonModel.Name" placeholder="Name" />
						}
						@if (PersonModel.Id != 0)
						{
							<input class="input-group-text" type="text" @bind="PersonModel.Name" placeholder="Name" readonly />
						}
					</div>

					<SfCheckBox Label="Loyalty" @bind-Checked="PersonModel.Loyalty" />

					@if (AdvanceModel.Id != 0)
					{
						<div class="form-group">
							<label>Booking</label>
							<input class="input-group-text" type="number" @bind="AdvanceModel.Booking" placeholder="Booking Amount" readonly />
						</div>

						<div class="form-group">
							<label>Advance</label>
							<input class="input-group-text" type="number" @bind="totalAdvance" placeholder="Advance Paid" readonly />
						</div>
					}

					<div class="form-group">
						<label>Male</label>
						<input class="input-group-text" type="number" @bind="TransactionModel.Male" placeholder="Male" />
					</div>

					<div class="form-group">
						<label>Female</label>
						<input class="input-group-text" type="number" @bind="TransactionModel.Female" placeholder="Female" />
					</div>

					<div class="form-group">
						<label>Cash</label>
						<input class="input-group-text" type="number" @bind="TransactionModel.Cash" placeholder="Cash" />
					</div>

					<div class="form-group">
						<label>Card</label>
						<input class="input-group-text" type="number" @bind="TransactionModel.Card" placeholder="Card" />
					</div>

					<div class="form-group">
						<label>UPI</label>
						<input class="input-group-text" type="number" @bind="TransactionModel.UPI" placeholder="UPI" />
					</div>

					<div class="form-group">
						<label>Amex</label>
						<input class="input-group-text" type="number" @bind="TransactionModel.Amex" placeholder="Amex" />
					</div>

					@if (AdvanceModel.Id != 0)
					{
						<div class="form-group">
							<label>Remarks</label>
							<input class="input-group-text" type="text" @bind="AdvanceModel.ApprovedBy" placeholder="Remarks" />
						</div>
					}
					@if (AdvanceModel.Id == 0)
					{
						<div class="form-group">
							<label>Remarks</label>
							<input class="input-group-text" type="text" @bind="TransactionModel.ApprovedBy" placeholder="Remarks" />
						</div>
					}

					<select class="form-select-sm" @bind="TransactionModel.ReservationTypeId">
						@foreach (var reservationType in reservationTypes)
						{
							<option value="@reservationType.Id">@reservationType.Name</option>
						}
					</select>

					<button class="btn btn-primary" type="button" @onclick="OnSaveButtonClick">Save</button>
				}
			</div>
		</article>
	</main>
</div>